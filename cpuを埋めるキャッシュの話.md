%Date%:20210217
%source%:https://ascii.jp/elem/000/000/563/563800/3/

## 内容
* cpuキャッシュの話
* キャッシュのタグとは、そしてタグを高速に検索かけるにはどうすれば良いのか問題について

## 発見
* タグの検索は、(高級言語と違って)2分探索とかで検索をかけることができないっぽい？
  * タグ検索はハードで実現される処理なので、それをやろうとすると独自に回路を作らなきゃいけない感じなのかな
* 従来のダイレクトマップ方式だと、周期的なmappingに置いて不便があったらしい
```
00010000H
00020000H
00030000H
00040000H
00050000H
---> 000000 tagとして扱われてしまう
```
* 上記のようなaddrに対して、同じtagに分類されちゃうので、周期的なアドレスのアクセスに対してはキャッシュヒット率が落ちてしまう 
  * ああああ、これもハッシュにもっと複雑な演算すれば良いじゃんって思ったけど、この話も回路で実現してるから結局(bit演算みたいな軽い演算で乗り越えたいってので)無理なのか

## 疑問
* 検索かけるときの比較はどのように行っている？普通にcmp命令とか？
  * cmp命令だったらそれ自体ではそこまで遅くならなさそうだけど
* addr <-> タグのハッシュの方法
* 上のダイレクトマップ方式の話、ハッシュ

