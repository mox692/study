%Date%:20220505
%source%:https://flat-leon.hatenablog.com/entry/cpp_lets_use_weak_ref

## 概要

## 発見
* *そして、弱参照はガベージコレクションが参照とみなさない参照です。オブジェクトがいくら弱参照されていても、通常の参照がないのであればガベージコレクションはそのオブジェクトを削除します。このように、ガベージコレクションにおいてオブジェクトの生存期間を延命させない参照を弱参照と呼びます。*
* (弱参照は強参照と違って、)「オブジェクトの削除を検知できる」仕組み.
  * 一方、強参照は「参照されている数」をカウントするための仕組み.
* *そして、弱参照はガベージコレクションが参照とみなさない参照です。オブジェクトがいくら弱参照されていても、通常の参照がないのであればガベージコレクションはそのオブジェクトを削除します。* 
  * これは多分すでに実装として存在してるC++を意識して書いている気がする. 実際のC++の実装でもそうなってるんだと思う
  * 一般的に強参照に対する弱参照って流れで解説される時は、
* *弱参照の一番の使い所は、オブジェクトの削除を検知したい場合です。弱参照は参照先のオブジェクトが削除された場合に参照が無効化されるので、弱参照を使うことでオブジェクトがまだ生きているかどうかを知ることができます。C++での通常の参照(T&)やポインタではこれができません。*
  * 実際にC++でどう書くんだろう？
    * [ここの使用例](https://flat-leon.hatenablog.com/entry/cpp_impl_weak_ref)によると、boolを返すGetWeakPtr()ってAPIがあるみたい
## 疑問
### 実装ベースで、弱参照ときょう参照はどう違うか？
* きょう参照
  * [ここの例](https://cpprefjp.github.io/reference/memory/shared_ptr.html)を見るに、代入演算子をオーバーロードして、代入が発生した際にcounterをincrementしてるんだkと思
* 弱参照
  *  

## その他
* shared_ptr を一回使って、感覚を持った方がいいかも.
